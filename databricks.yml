bundle:
  name: trifold

sync:
  include:
    - .build

artifacts:
  default:
    type: whl
    path: .
    build: uv build --wheel

resources:
  apps:
    trifold:
      name: "trifold"
      description: "Full stack data application on Databricks"
      source_code_path: ./.build
      config:
        command: ["uvicorn", "trifold.app.app:app", "--workers", "2"]

      # resources:
      #   - database:
      #       database_name: databricks_postgres
      #       instance_name: trifold
      #       permission: CAN_CONNECT_AND_CREATE
      #     name: database

targets:
  dev:
    mode: development
    default: true
